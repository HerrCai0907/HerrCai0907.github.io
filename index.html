<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>congcong's blog</title>
    <meta name="author" content="congcong cai" />
  </head>
  <body>
    <div style="display: flex; height: 100%">
      <div id="left" style="height: 100%; background: rgba(132, 235, 6, 0.733)"></div>
      <div id="right">welcome to congcong's blog!</div>
    </div>
    <script src="/resources/showdown.min.js"></script>
    <script>
      let converter = new showdown.Converter();
      fetch("/index.md")
        .then((response) => response.text())
        .then((text) => {
          document.getElementById("left").innerHTML = converter.makeHtml(text);
        });

      const params = new Proxy(new URLSearchParams(window.location.search), {
        get: (searchParams, prop) => searchParams.get(prop),
      });
      if (params.page) {
        if (params.page.endsWith(".md")) {
          fetch(params.page)
            .then((response) => response.text())
            .then((text) => {
              document.getElementById("right").innerHTML = converter.makeHtml(text);
            });
        } else {
          const name = params.page.slice(params.page.findIndex("/") + 1, params.page.findIndex("."));
          document.getElementById("right").innerHTML = `<a href="/${params.page}">${params.page}</a>`;
        }
      }
    </script>
  </body>
</html>
